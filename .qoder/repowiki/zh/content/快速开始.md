# 快速开始

<cite>
**本文档中引用的文件**
- [package.json](file://package.json)
- [README.md](file://README.md)
- [README.zh_CN.md](file://README.zh_CN.md)
- [src/index.js](file://src/index.js)
- [src/components/Treeselect.vue](file://src/components/Treeselect.vue)
- [src/style.less](file://src/style.less)
- [src/examples/LargeDataExample.vue](file://src/examples/LargeDataExample.vue)
- [performance-test.html](file://performance-test.html)
</cite>

## 目录
1. [简介](#简介)
2. [系统要求](#系统要求)
3. [通过npm/yarn安装](#通过npmyarn安装)
4. [全局注册组件](#全局注册组件)
5. [局部注册组件](#局部注册组件)
6. [基本使用示例](#基本使用示例)
7. [通过CDN直接引入](#通过cdn直接引入)
8. [CSS样式文件引入](#css样式文件引入)
9. [基础配置说明](#基础配置说明)
10. [常见问题解决](#常见问题解决)

## 简介

vue-treeselect-next是一个功能强大的Vue.js树形选择器组件，支持嵌套选项的多选功能。它提供了丰富的配置选项，包括模糊匹配、异步搜索、延迟加载等高级特性，是处理复杂树形数据的理想选择。

### 主要特性

- **单选和多选支持**：支持简单的单选和复杂的多选操作
- **嵌套选项**：完整的树形结构支持，无限层级
- **智能搜索**：内置模糊匹配和异步搜索功能
- **性能优化**：支持虚拟滚动和延迟加载
- **高度可定制**：丰富的配置选项和主题支持
- **键盘支持**：完整的键盘导航体验

## 系统要求

- **Vue.js**: ^2.2.0 或更高版本
- **Node.js**: >=12.0.0
- **npm**: >=6.0.0
- **浏览器**: Chrome、Firefox、Edge、Safari，IE ≥ 9（部分功能可能受限）

## 通过npm/yarn安装

### 使用npm安装

```bash
npm install --save @joevin/vue-treeselect-next
```

### 使用yarn安装

```bash
yarn add @joevin/vue-treeselect-next
```

### 安装验证

安装完成后，您可以在项目中导入和使用该组件：

```javascript
import Treeselect from '@joevin/vue-treeselect-next'
```

**章节来源**
- [package.json](file://package.json#L1-L154)
- [README.md](file://README.md#L36-L43)

## 全局注册组件

### 在Vue实例中全局注册

```javascript
import Vue from 'vue'
import Treeselect from '@joevin/vue-treeselect-next'

// 全局注册
Vue.component('treeselect', Treeselect)

// 导入样式
import '@joevin/vue-treeselect-next/dist/vue-treeselect.css'
```

### 在Vue 2.7+中全局注册

```javascript
import { createApp } from 'vue'
import Treeselect from '@joevin/vue-treeselect-next'

const app = createApp({})
app.component('treeselect', Treeselect)
app.mount('#app')

// 导入样式
import '@joevin/vue-treeselect-next/dist/vue-treeselect.css'
```

## 局部注册组件

### 在单文件组件中局部注册

```vue
<template>
  <div>
    <treeselect v-model="selectedValue" :options="options" />
  </div>
</template>

<script>
import Treeselect from '@joevin/vue-treeselect-next'
import '@joevin/vue-treeselect-next/dist/vue-treeselect.css'

export default {
  components: {
    Treeselect
  },
  data() {
    return {
      selectedValue: null,
      options: [
        {
          id: 'a',
          label: '选项A',
          children: [
            {
              id: 'aa',
              label: '子选项A1'
            },
            {
              id: 'ab',
              label: '子选项A2'
            }
          ]
        },
        {
          id: 'b',
          label: '选项B'
        }
      ]
    }
  }
}
</script>
```

### 在组合式API中使用

```vue
<script setup>
import { ref } from 'vue'
import Treeselect from '@joevin/vue-treeselect-next'
import '@joevin/vue-treeselect-next/dist/vue-treeselect.css'

const selectedValue = ref(null)
const options = ref([
  {
    id: 'a',
    label: '选项A',
    children: [
      { id: 'aa', label: '子选项A1' },
      { id: 'ab', label: '子选项A2' }
    ]
  },
  { id: 'b', label: '选项B' }
])
</script>

<template>
  <treeselect v-model="selectedValue" :options="options" />
</template>
```

## 基本使用示例

### 最简单的单选示例

```vue
<template>
  <div>
    <h3>单选示例</h3>
    <treeselect
      v-model="selectedValue"
      :options="options"
      placeholder="请选择一个选项"
    />
    <p>当前选择: {{ selectedValue }}</p>
  </div>
</template>

<script>
export default {
  data() {
    return {
      selectedValue: null,
      options: [
        { id: '1', label: '北京' },
        { id: '2', label: '上海' },
        { id: '3', label: '广州' },
        { id: '4', label: '深圳' }
      ]
    }
  }
}
</script>
```

### 多选示例

```vue
<template>
  <div>
    <h3>多选示例</h3>
    <treeselect
      v-model="selectedValues"
      :options="options"
      :multiple="true"
      :searchable="true"
      placeholder="请选择多个选项"
    />
    <p>当前选择: {{ selectedValues }}</p>
  </div>
</template>

<script>
export default {
  data() {
    return {
      selectedValues: [],
      options: [
        {
          id: 'north',
          label: '北方城市',
          children: [
            { id: 'bj', label: '北京' },
            { id: 'tj', label: '天津' },
            { id: 'sjz', label: '石家庄' }
          ]
        },
        {
          id: 'south',
          label: '南方城市',
          children: [
            { id: 'gz', label: '广州' },
            { id: 'sz', label: '深圳' },
            { id: 'hz', label: '杭州' }
          ]
        }
      ]
    }
  }
}
</script>
```

### 带搜索功能的示例

```vue
<template>
  <div>
    <h3>带搜索功能的多选</h3>
    <treeselect
      v-model="selectedItems"
      :options="options"
      :multiple="true"
      :searchable="true"
      :clearable="true"
      placeholder="搜索并选择"
    />
  </div>
</template>

<script>
export default {
  data() {
    return {
      selectedItems: [],
      options: [
        { id: 'apple', label: '苹果' },
        { id: 'banana', label: '香蕉' },
        { id: 'orange', label: '橙子' },
        { id: 'grape', label: '葡萄' },
        { id: 'watermelon', label: '西瓜' },
        { id: 'strawberry', label: '草莓' }
      ]
    }
  }
}
</script>
```

**章节来源**
- [README.md](file://README.md#L44-L90)
- [README.zh_CN.md](file://README.zh_CN.md#L44-L90)

## 通过CDN直接引入

对于快速原型开发或非构建环境，可以直接通过CDN引入组件：

### HTML页面引入方式

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Vue Treeselect CDN 示例</title>
  <!-- 引入Vue 2.x -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>
  <!-- 引入vue-treeselect -->
  <script src="https://cdn.jsdelivr.net/npm/@joevin/vue-treeselect-next@^0.5.0/dist/vue-treeselect.umd.min.js"></script>
  <!-- 引入样式 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@joevin/vue-treeselect-next@^0.5.0/dist/vue-treeselect.min.css">
</head>
<body>
  <div id="app">
    <treeselect v-model="value" :options="options" placeholder="请选择"></treeselect>
  </div>

  <script>
    // 注册组件
    Vue.component('treeselect', VueTreeselect.Treeselect)
    
    new Vue({
      el: '#app',
      data: {
        value: null,
        options: [
          { id: '1', label: '选项1' },
          { id: '2', label: '选项2' },
          { id: '3', label: '选项3' }
        ]
      }
    })
  </script>
</body>
</html>
```

### 动态加载示例

```html
<div id="dynamic-app">
  <treeselect 
    v-model="selectedValue" 
    :options="treeOptions" 
    :multiple="true"
    placeholder="动态加载选项"
  ></treeselect>
</div>

<script>
// 模拟异步数据加载
setTimeout(() => {
  new Vue({
    el: '#dynamic-app',
    data: {
      selectedValue: [],
      treeOptions: [
        {
          id: 'folder1',
          label: '文件夹1',
          children: [
            { id: 'file1', label: '文件1.txt' },
            { id: 'file2', label: '文件2.txt' }
          ]
        },
        {
          id: 'folder2',
          label: '文件夹2',
          children: [
            { id: 'file3', label: '文件3.txt' },
            { id: 'file4', label: '文件4.txt' }
          ]
        }
      ]
    }
  })
}, 1000)
</script>
```

**章节来源**
- [README.md](file://README.md#L91-L138)
- [README.zh_CN.md](file://README.zh_CN.md#L91-L138)

## CSS样式文件引入

### 方法一：通过模块系统引入

```javascript
// 在JavaScript文件中
import '@joevin/vue-treeselect-next/dist/vue-treeselect.css'
```

### 方法二：在CSS文件中引入

```css
/* 在您的主CSS文件中 */
@import '~@joevin/vue-treeselect-next/dist/vue-treeselect.css';
```

### 方法三：在HTML中直接引入

```html
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@joevin/vue-treeselect-next@^0.5.0/dist/vue-treeselect.min.css">
```

### 自定义主题样式

```css
/* 自定义主题颜色 */
.vue-treeselect {
  --treeselect-primary-color: #1890ff;
  --treeselect-bg-color: #ffffff;
  --treeselect-border-color: #d9d9d9;
  --treeselect-hover-color: #e6f7ff;
}

/* 自定义字体大小 */
.vue-treeselect {
  --treeselect-font-size: 14px;
  --treeselect-option-height: 36px;
}
```

### 样式变量覆盖

```css
:root {
  /* 主色调 */
  --treeselect-primary-color: #40a9ff;
  
  /* 边框颜色 */
  --treeselect-border-color: #d9d9d9;
  --treeselect-border-color-hover: #40a9ff;
  
  /* 背景颜色 */
  --treeselect-bg-color: #ffffff;
  --treeselect-bg-color-hover: #f5f5f5;
  
  /* 字体颜色 */
  --treeselect-text-color: #333333;
  --treeselect-placeholder-color: #aaaaaa;
  
  /* 间距 */
  --treeselect-padding: 8px;
  --treeselect-border-radius: 4px;
}
```

**章节来源**
- [src/style.less](file://src/style.less#L1-L800)
- [package.json](file://package.json#L17-L18)

## 基础配置说明

### 基本属性配置

| 属性名 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `v-model` | String/Number/Array/Object | null | 绑定的值，单选时为String/Number，多选时为Array |
| `options` | Array | [] | 选项数据数组，支持嵌套结构 |
| `multiple` | Boolean | false | 是否允许多选 |
| `searchable` | Boolean | false | 是否启用搜索功能 |
| `placeholder` | String | '请选择' | 占位符文本 |
| `disabled` | Boolean | false | 是否禁用组件 |
| `clearable` | Boolean | false | 是否显示清除按钮 |

### 选项数据结构

```javascript
const options = [
  {
    id: '1',           // 必需，选项唯一标识
    label: '选项1',    // 必需，显示文本
    children: [        // 可选，子选项数组
      { id: '1-1', label: '子选项1-1' },
      { id: '1-2', label: '子选项1-2' }
    ],
    disabled: false,   // 可选，是否禁用该选项
    isDisabled: false, // 可选，同disabled
    isParentDisabled: false, // 可选，父级是否禁用
    isChildDisabled: false,  // 可选，子级是否禁用
    isVirtual: false,  // 可选，是否为虚拟节点
    isRemote: false,   // 可选，是否为远程数据
    isLoaded: true,    // 可选，是否已加载
    isLoading: false,  // 可选，是否正在加载
    isExpanded: false, // 可选，是否展开
    isSelectable: true // 可选，是否可选择
  }
]
```

### 事件处理

```vue
<template>
  <treeselect
    v-model="value"
    :options="options"
    @focus="onFocus"
    @blur="onBlur"
    @open="onOpen"
    @close="onClose"
    @search-change="onSearchChange"
    @select="onSelect"
    @deselect="onDeselect"
  />
</template>

<script>
export default {
  methods: {
    onFocus(event) {
      console.log('获得焦点', event)
    },
    onBlur(event) {
      console.log('失去焦点', event)
    },
    onOpen() {
      console.log('菜单打开')
    },
    onClose() {
      console.log('菜单关闭')
    },
    onSearchChange(query) {
      console.log('搜索内容:', query)
    },
    onSelect(option) {
      console.log('选择:', option)
    },
    onDeselect(option) {
      console.log('取消选择:', option)
    }
  }
}
</script>
```

### 插槽使用

```vue
<template>
  <treeselect v-model="value" :options="options">
    <!-- 自定义占位符 -->
    <template #placeholder="{ placeholder }">
      <span class="custom-placeholder">{{ placeholder }}</span>
    </template>
    
    <!-- 自定义选项标签 -->
    <template #option-label="{ option }">
      <span class="custom-option">
        <span>{{ option.label }}</span>
        <span class="badge">{{ option.count }}</span>
      </span>
    </template>
    
    <!-- 自定义多选值 -->
    <template #multi-value-label="{ option }">
      <span class="custom-multi-value">{{ option.label }}</span>
    </template>
  </treeselect>
</template>
```

## 常见问题解决

### 问题1：组件无法正常显示

**症状**：组件显示空白或样式异常

**解决方案**：
1. 确保正确引入了CSS样式文件
2. 检查Vue版本是否符合要求（>=2.2.0）
3. 确认选项数据格式正确

```javascript
// 正确的选项数据格式
const options = [
  { id: '1', label: '选项1' },
  { id: '2', label: '选项2' }
]
```

### 问题2：样式丢失或不生效

**解决方案**：
1. 检查CSS文件路径是否正确
2. 确保CSS预处理器已正确配置
3. 使用浏览器开发者工具检查样式加载情况

```css
/* 检查样式是否正确加载 */
.vue-treeselect {
  border: 1px solid #d9d9d9;
}
```

### 问题3：搜索功能不工作

**解决方案**：
1. 确保设置了`searchable: true`
2. 检查选项数据是否包含`label`字段
3. 确认没有设置`disable-fuzzy-matching`

```vue
<treeselect
  v-model="value"
  :options="options"
  :searchable="true"
  :disable-fuzzy-matching="false"
/>
```

### 问题4：性能问题（大数据量）

**解决方案**：
1. 对于大量数据，启用虚拟滚动
2. 设置合适的默认展开层级
3. 使用缓存选项

```vue
<treeselect
  v-model="value"
  :options="largeOptions"
  :virtual-scroll="true"
  :default-expand-level="1"
  :cache-options="true"
  :option-height="36"
/>
```

### 问题5：TypeScript类型错误

**解决方案**：
1. 安装类型声明文件
2. 正确配置Vue组件类型

```typescript
// 在Vue组件中使用
import { defineComponent } from 'vue'
import Treeselect from '@joevin/vue-treeselect-next'

export default defineComponent({
  components: {
    Treeselect
  }
})
```

### 性能优化建议

1. **大数据量优化**：
   ```vue
   <treeselect
     :virtual-scroll="true"
     :default-expand-level="0"
     :flatten-search-results="true"
     :show-count="false"
     :cache-options="true"
   />
   ```

2. **内存优化**：
   ```javascript
   // 及时清理未使用的选项
   this.$refs.treeselect.clearOptionsCache()
   ```

3. **渲染优化**：
   ```vue
   <treeselect
     :lazy-load="true"
     :load-options="loadOptionsMethod"
   />
   ```

**章节来源**
- [src/examples/LargeDataExample.vue](file://src/examples/LargeDataExample.vue#L1-L214)
- [performance-test.html](file://performance-test.html#L1-L200)

## 结语

通过本快速开始指南，您应该已经能够：

1. 成功安装和引入vue-treeselect-next组件
2. 在Vue项目中正确使用组件的基本功能
3. 理解组件的核心配置选项
4. 解决常见的使用问题

接下来，您可以深入学习更高级的功能，如自定义样式、事件处理、异步加载等。建议参考官方文档获取更详细的信息。

如果您在使用过程中遇到任何问题，欢迎查阅项目的GitHub仓库或提交Issue寻求帮助。