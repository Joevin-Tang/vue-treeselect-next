# æ€§èƒ½ä¼˜åŒ–

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [src/components/VirtualList.vue](file://src/components/VirtualList.vue)
- [src/components/Menu.vue](file://src/components/Menu.vue)
- [src/mixins/treeselectMixin.js](file://src/mixins/treeselectMixin.js)
- [src/examples/LargeDataExample.vue](file://src/examples/LargeDataExample.vue)
- [test/unit/specs/VirtualScroll.spec.js](file://test/unit/specs/VirtualScroll.spec.js)
- [OPTIMIZATION_SUMMARY.md](file://OPTIMIZATION_SUMMARY.md)
- [PERFORMANCE_OPTIMIZATION_GUIDE.md](file://PERFORMANCE_OPTIMIZATION_GUIDE.md)
- [src/utils/debounce.js](file://src/utils/debounce.js)
</cite>

## ç›®å½•
1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [æ ¸å¿ƒæ€§èƒ½ä¼˜åŒ–ç‰¹æ€§](#æ ¸å¿ƒæ€§èƒ½ä¼˜åŒ–ç‰¹æ€§)
3. [è™šæ‹Ÿæ»šåŠ¨è¯¦è§£](#è™šæ‹Ÿæ»šåŠ¨è¯¦è§£)
4. [å…³é”®æ€§èƒ½é…ç½®](#å…³é”®æ€§èƒ½é…ç½®)
5. [æ€§èƒ½ä¼˜åŒ–åŸç†](#æ€§èƒ½ä¼˜åŒ–åŸç†)
6. [é…ç½®ç¤ºä¾‹ä¸æœ€ä½³å®è·µ](#é…ç½®ç¤ºä¾‹ä¸æœ€ä½³å®è·µ)
7. [æ€§èƒ½å¯¹æ¯”æ•°æ®](#æ€§èƒ½å¯¹æ¯”æ•°æ®)
8. [æ•…éšœæ’æŸ¥æŒ‡å—](#æ•…éšœæ’æŸ¥æŒ‡å—)
9. [è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®](#è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®)

## æ¦‚è¿°

Vue Treeselect ç»„ä»¶åº“é’ˆå¯¹å¤§æ•°æ®é‡åœºæ™¯ï¼ˆ1-2ä¸‡æ¡æ ‘å½¢æ•°æ® + checkboxå¤šé€‰ï¼‰è¿›è¡Œäº†æ·±åº¦æ€§èƒ½ä¼˜åŒ–ã€‚ä¸»è¦ä¼˜åŒ–é›†ä¸­åœ¨è™šæ‹Ÿæ»šåŠ¨ã€å“åº”å¼å±æ€§ä¼˜åŒ–ã€æœç´¢é˜²æŠ–ç­‰æ–¹é¢ï¼Œå®ç°äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚

### ä¸»è¦ä¼˜åŒ–æˆæœ

- **æ¸²æŸ“é€Ÿåº¦æå‡**ï¼š50-100å€
- **å†…å­˜å ç”¨å‡å°‘**ï¼š75%
- **æ»šåŠ¨å¸§ç‡æå‡**ï¼šä»15fpsæå‡åˆ°60fps
- **åˆå§‹åŒ–æ—¶é—´ç¼©çŸ­**ï¼šä»3.5ç§’é™è‡³0.6ç§’

## æ ¸å¿ƒæ€§èƒ½ä¼˜åŒ–ç‰¹æ€§

### 1. è™šæ‹Ÿæ»šåŠ¨ï¼ˆVirtual Scrollingï¼‰

è™šæ‹Ÿæ»šåŠ¨æ˜¯æ ¸å¿ƒæ€§èƒ½ä¼˜åŒ–ç‰¹æ€§ï¼Œä¸“é—¨è§£å†³å¤§æ•°æ®é‡æ¸²æŸ“é—®é¢˜ã€‚

```mermaid
flowchart TD
A["å¤§æ•°æ®é›†10000+èŠ‚ç‚¹"] --> B{"å¯ç”¨è™šæ‹Ÿæ»šåŠ¨?"}
B --> |æ˜¯| C["åªæ¸²æŸ“å¯è§†åŒºåŸŸ<br/>~30ä¸ªèŠ‚ç‚¹"]
B --> |å¦| D["å…¨é‡æ¸²æŸ“<br/>10000+èŠ‚ç‚¹"]
C --> E["å†…å­˜å ç”¨å¤§å¹…å‡å°‘"]
C --> F["æ¸²æŸ“é€Ÿåº¦æ˜¾è‘—æå‡"]
C --> G["æ»šåŠ¨æµç•…åº¦æ”¹å–„"]
D --> H["å†…å­˜å ç”¨é«˜"]
D --> I["æ¸²æŸ“ç¼“æ…¢"]
D --> J["å¡é¡¿ä¸¥é‡"]
```

**å›¾è¡¨æ¥æº**
- [src/components/VirtualList.vue](file://src/components/VirtualList.vue#L1-L231)
- [src/components/Menu.vue](file://src/components/Menu.vue#L161-L177)

### 2. å“åº”å¼å±æ€§ä¼˜åŒ–

å‡å°‘ä¸å¿…è¦çš„å“åº”å¼å±æ€§å¼€é”€ï¼Œå°†èŠ‚ç‚¹å¯¹è±¡ä»ä½¿ç”¨15+ä¸ª$setè°ƒç”¨æ”¹ä¸ºç›´æ¥åˆ›å»ºæ™®é€šå¯¹è±¡ã€‚

### 3. æœç´¢é˜²æŠ–ä¼˜åŒ–

ä¸ºæœ¬åœ°æœç´¢æ·»åŠ 300msé˜²æŠ–å»¶è¿Ÿï¼Œé¿å…ç”¨æˆ·è¾“å…¥æ—¶é¢‘ç¹è§¦å‘å…¨æ ‘éå†ã€‚

### 4. ç¼“å­˜æœºåˆ¶

æ”¯æŒæœç´¢ç»“æœç¼“å­˜ï¼Œå‡å°‘é‡å¤æœç´¢çš„è®¡ç®—å¼€é”€ã€‚

## è™šæ‹Ÿæ»šåŠ¨è¯¦è§£

### å·¥ä½œåŸç†

è™šæ‹Ÿæ»šåŠ¨é€šè¿‡ä»¥ä¸‹æœºåˆ¶å®ç°æ€§èƒ½ä¼˜åŒ–ï¼š

```mermaid
sequenceDiagram
participant U as ç”¨æˆ·
participant V as VirtualList
participant C as è®¡ç®—å¼•æ“
participant R as æ¸²æŸ“å¼•æ“
U->>V : æ»šåŠ¨äº‹ä»¶
V->>C : è®¡ç®—å¯è§èŒƒå›´
C->>C : startIndex = scrollTop / itemHeight - buffer
C->>C : endIndex = startIndex + visibleCount + buffer*2
C->>R : è¿”å›å¯è§é¡¹ç›®åˆ—è¡¨
R->>V : æ¸²æŸ“å¯è§é¡¹ç›®
V->>U : æ›´æ–°DOM
```

**å›¾è¡¨æ¥æº**
- [src/components/VirtualList.vue](file://src/components/VirtualList.vue#L86-L111)

### æ ¸å¿ƒç®—æ³•å®ç°

è™šæ‹Ÿæ»šåŠ¨çš„æ ¸å¿ƒç®—æ³•åŒ…æ‹¬ï¼š

1. **å¯è§†åŒºåŸŸè®¡ç®—**ï¼š
   - `visibleCount`: å¯è§†åŒºåŸŸå†…èƒ½å®¹çº³çš„é¡¹ç›®æ•°é‡
   - `startIndex`: èµ·å§‹ç´¢å¼•
   - `endIndex`: ç»“æŸç´¢å¼•

2. **ç¼“å†²åŒºç®¡ç†**ï¼š
   - `bufferSize`: ä¸Šä¸‹ç¼“å†²åŒºæ•°é‡ï¼Œé»˜è®¤5ä¸ª
   - ç¡®ä¿æ»šåŠ¨æ—¶ä¸ä¼šå‡ºç°ç©ºç™½

3. **é«˜åº¦è®¡ç®—**ï¼š
   - `totalHeight`: æ€»é«˜åº¦ = é¡¹ç›®æ€»æ•° Ã— é€‰é¡¹é«˜åº¦
   - `offsetY`: åç§»é‡ = startIndex Ã— é€‰é¡¹é«˜åº¦

### è™šæ‹Ÿæ»šåŠ¨çš„ä¼˜åŠ¿

| æ–¹é¢ | ä¼ ç»Ÿæ¸²æŸ“ | è™šæ‹Ÿæ»šåŠ¨ |
|------|----------|----------|
| **DOMèŠ‚ç‚¹æ•°** | 10000+ | ~30 |
| **å†…å­˜å ç”¨** | 180MB | 45MB |
| **åˆå§‹åŒ–æ—¶é—´** | 3500ms | 600ms |
| **æ»šåŠ¨å¸§ç‡** | 15fps | 60fps |
| **DOMæ“ä½œé¢‘ç‡** | æ¯æ¬¡æ»šåŠ¨é‡æ¸²æŸ“æ‰€æœ‰èŠ‚ç‚¹ | åªé‡æ¸²æŸ“å¯è§èŠ‚ç‚¹ |

**èŠ‚æ¥æº**
- [src/components/VirtualList.vue](file://src/components/VirtualList.vue#L71-L111)
- [test/unit/specs/VirtualScroll.spec.js](file://test/unit/specs/VirtualScroll.spec.js#L105-L120)

## å…³é”®æ€§èƒ½é…ç½®

### virtualScrollï¼ˆè™šæ‹Ÿæ»šåŠ¨ï¼‰

**ç±»å‹**: `Boolean`  
**é»˜è®¤å€¼**: `false`  
**è¯´æ˜**: å¯ç”¨è™šæ‹Ÿæ»šåŠ¨ä»¥ä¼˜åŒ–å¤§æ•°æ®é‡æ¸²æŸ“æ€§èƒ½

```vue
<treeselect
  :virtual-scroll="true"
  :option-height="40"
/>
```

### optionHeightï¼ˆé€‰é¡¹é«˜åº¦ï¼‰

**ç±»å‹**: `Number`  
**é»˜è®¤å€¼**: `40`  
**è¯´æ˜**: æ¯ä¸ªé€‰é¡¹çš„é«˜åº¦ï¼ˆåƒç´ ï¼‰ï¼Œå¿…é¡»ä¸CSSä¸­çš„å®é™…é«˜åº¦ä¸€è‡´

```vue
<treeselect
  :virtual-scroll="true"
  :option-height="40"
/>
```

**CSSè¦æ±‚**ï¼š
```css
.vue-treeselect__option {
  height: 40px;        /* ä¸ option-height ä¸€è‡´ */
  line-height: 40px;
  overflow: hidden;
}
```

### cacheOptionsï¼ˆç¼“å­˜æœç´¢ç»“æœï¼‰

**ç±»å‹**: `Boolean`  
**é»˜è®¤å€¼**: `true`  
**è¯´æ˜**: ç¼“å­˜æœç´¢ç»“æœï¼Œé¿å…é‡å¤æœç´¢ç›¸åŒæŸ¥è¯¢

```vue
<treeselect
  :cache-options="true"
/>
```

### maxHeightï¼ˆèœå•æœ€å¤§é«˜åº¦ï¼‰

**ç±»å‹**: `Number`  
**é»˜è®¤å€¼**: `300`  
**è¯´æ˜**: èœå•çš„æœ€å¤§é«˜åº¦ï¼ˆåƒç´ ï¼‰ï¼Œå½±å“å¯è§†åŒºåŸŸè®¡ç®—

```vue
<treeselect
  :max-height="300"
/>
```

### å…¶ä»–é‡è¦é…ç½®

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | æ€§èƒ½å½±å“ |
|--------|------|--------|----------|
| `default-expand-level` | Number | `Infinity` | å½±å“åˆå§‹æ¸²æŸ“èŠ‚ç‚¹æ•° |
| `flatten-search-results` | Boolean | `false` | æ§åˆ¶æœç´¢ç»“æœå±•ç¤ºæ–¹å¼ |
| `show-count` | Boolean | `true` | æ˜¾ç¤ºè®¡æ•°ä¼šå¢åŠ è®¡ç®—å¼€é”€ |
| `disable-fuzzy-matching` | Boolean | `false` | ç¦ç”¨æ¨¡ç³ŠåŒ¹é…æå‡æœç´¢é€Ÿåº¦ |

**èŠ‚æ¥æº**
- [src/mixins/treeselectMixin.js](file://src/mixins/treeselectMixin.js#L384-L387)
- [src/components/VirtualList.vue](file://src/components/VirtualList.vue#L18-L25)

## æ€§èƒ½ä¼˜åŒ–åŸç†

### ä¸ºä»€ä¹ˆä¼šå‡ºç°æ€§èƒ½é—®é¢˜ï¼Ÿ

å¤§æ•°æ®é‡åœºæ™¯ä¸‹çš„æ€§èƒ½ç“¶é¢ˆä¸»è¦åŒ…æ‹¬ï¼š

```mermaid
mindmap
root((æ€§èƒ½ç“¶é¢ˆ))
DOMæ¸²æŸ“å‹åŠ›
å…¨é‡DOMèŠ‚ç‚¹
æµè§ˆå™¨æ¸²æŸ“è´Ÿæ‹…
å†…å­˜å ç”¨è¿‡é«˜
å“åº”å¼ç³»ç»Ÿå¼€é”€
è¿‡å¤šå“åº”å¼å±æ€§
é¢‘ç¹çš„getter/setterè°ƒç”¨
æ·±åº¦ç›‘å¬å¼€é”€
æœç´¢æ€§èƒ½é—®é¢˜
å…¨é‡æ ‘éå†
é¢‘ç¹çš„å­—ç¬¦ä¸²åŒ¹é…
ç¼ºä¹é˜²æŠ–æœºåˆ¶
æ•°æ®ç»“æ„å¤æ‚æ€§
æ ‘å½¢ç»“æ„éå†
çˆ¶å­å…³ç³»ç»´æŠ¤
çŠ¶æ€åŒæ­¥å¼€é”€
```

### ä¼˜åŒ–å¦‚ä½•ç”Ÿæ•ˆï¼Ÿ

#### è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–
```
ä¼˜åŒ–å‰: æ¸²æŸ“ 10000 ä¸ªèŠ‚ç‚¹ â†’ ä¸¥é‡å¡é¡¿
ä¼˜åŒ–å: åªæ¸²æŸ“ ~30 ä¸ªå¯è§èŠ‚ç‚¹ â†’ ä¸èˆ¬é¡ºæ»‘
æ€§èƒ½æå‡: 333 å€ DOM å‡å°‘
```

#### å“åº”å¼å±æ€§ä¼˜åŒ–
```
ä¼˜åŒ–å‰: 10000 èŠ‚ç‚¹ Ã— 15 å±æ€§ = 150000 ä¸ªå“åº”å¼
ä¼˜åŒ–å: 10000 èŠ‚ç‚¹ Ã— 2 å±æ€§ = 20000 ä¸ªå“åº”å¼
æ€§èƒ½æå‡: å‡å°‘ 87% çš„å“åº”å¼å¼€é”€
```

#### æœç´¢é˜²æŠ–ä¼˜åŒ–
```
ä¼˜åŒ–å‰: è¾“å…¥æ¯ä¸ªå­—ç¬¦éƒ½æœç´¢ â†’ é¢‘ç¹éå† 10000 èŠ‚ç‚¹
ä¼˜åŒ–å: åœæ­¢è¾“å…¥ 300ms åæ‰æœç´¢ â†’ å‡å°‘ 80% æœç´¢æ¬¡æ•°
```

**èŠ‚æ¥æº**
- [OPTIMIZATION_SUMMARY.md](file://OPTIMIZATION_SUMMARY.md#L222-L263)

## é…ç½®ç¤ºä¾‹ä¸æœ€ä½³å®è·µ

### å¤§æ•°æ®é‡ï¼ˆ1-2ä¸‡æ¡ï¼‰æ¨èé…ç½®

```vue
<template>
  <treeselect
    v-model="value"
    :options="largeOptions"
    :multiple="true"
    
    <!-- æ ¸å¿ƒæ€§èƒ½ä¼˜åŒ–é…ç½® -->
    :virtual-scroll="true"           <!-- å¿…é¡»ï¼è™šæ‹Ÿæ»šåŠ¨ -->
    :option-height="40"               <!-- æ¯ä¸ªé€‰é¡¹é«˜åº¦ -->
    :default-expand-level="0"         <!-- ä¸è‡ªåŠ¨å±•å¼€ -->
    :flatten-search-results="true"    <!-- æ‰å¹³åŒ–æœç´¢ç»“æœ -->
    :cache-options="true"             <!-- ç¼“å­˜æœç´¢ç»“æœ -->
    :show-count="false"               <!-- ä¸æ˜¾ç¤ºè®¡æ•° -->
    :disable-fuzzy-matching="true"    <!-- ç¦ç”¨æ¨¡ç³ŠåŒ¹é…ï¼ˆå¯é€‰ï¼‰ -->
    
    placeholder="è¯·é€‰æ‹©..."
  />
</template>
```

### ä¸åŒæ•°æ®é‡çš„é…ç½®ç­–ç•¥

#### < 1000 æ¡æ•°æ®
```js
:virtual-scroll="false"  // ä¸éœ€è¦è™šæ‹Ÿæ»šåŠ¨
:default-expand-level="1" // å¯ä»¥å±•å¼€ç¬¬ä¸€å±‚
:show-count="true"        // å¯ä»¥æ˜¾ç¤ºè®¡æ•°
```

#### 1000-5000 æ¡æ•°æ®
```js
:virtual-scroll="true"    // æ¨èå¼€å¯
:default-expand-level="0" // ä¸å±•å¼€
:show-count="false"       // å…³é—­è®¡æ•°
```

#### > 5000 æ¡æ•°æ®ï¼ˆæ¨èé…ç½®ï¼‰
```js
:virtual-scroll="true"           // å¿…é¡»å¼€å¯
:default-expand-level="0"        // å¿…é¡»ä¸º 0
:flatten-search-results="true"   // å¼ºçƒˆæ¨è
:show-count="false"              // å¿…é¡»å…³é—­
:disable-fuzzy-matching="true"   // æ¨èå¼€å¯
```

### æ€§èƒ½ç›‘æ§ç¤ºä¾‹

```javascript
// å¤§æ•°æ®æµ‹è¯•ç¤ºä¾‹
const largeDataExample = {
  useVirtualScroll: true,
  flattenSearch: true,
  disableFuzzy: false,
  
  // æ€§èƒ½æŒ‡æ ‡ç›‘æ§
  performanceMetrics: {
    initializationTime: 0,
    renderTime: 0,
    memoryUsage: 0,
    fps: 0
  }
}
```

**èŠ‚æ¥æº**
- [src/examples/LargeDataExample.vue](file://src/examples/LargeDataExample.vue#L23-L37)
- [PERFORMANCE_OPTIMIZATION_GUIDE.md](file://PERFORMANCE_OPTIMIZATION_GUIDE.md#L135-L157)

## æ€§èƒ½å¯¹æ¯”æ•°æ®

### æµ‹è¯•åœºæ™¯

**æ•°æ®è§„æ¨¡**: 10,000 æ¡æ ‘å½¢æ•°æ®ï¼Œ5å±‚æ·±åº¦  
**æµ‹è¯•ç¯å¢ƒ**: ç°ä»£æµè§ˆå™¨ï¼Œä¸­ç­‰é…ç½®è®¾å¤‡

### æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡å€æ•° |
|------|--------|--------|----------|
| **åˆå§‹åŒ–æ—¶é—´** | 3500ms | 600ms | **5.8x** âš¡ |
| **é¦–æ¬¡æ¸²æŸ“** | 2800ms | 50ms | **56x** ğŸš€ |
| **æœç´¢å“åº”** | 800ms | 120ms | **6.7x** âš¡ |
| **å†…å­˜å ç”¨** | 180MB | 45MB | **4x** ğŸ’¾ |
| **æ»šåŠ¨å¸§ç‡** | 15fps | 60fps | **4x** ğŸ® |
| **DOM èŠ‚ç‚¹æ•°** | 10000+ | ~30 | **333x** ğŸ“‰ |

### è™šæ‹Ÿæ»šåŠ¨æ•ˆæœéªŒè¯

```mermaid
graph LR
A["æ»šåŠ¨å‰<br/>æ¸²æŸ“30ä¸ªèŠ‚ç‚¹"] --> B["æ»šåŠ¨ä¸­<br/>åŠ¨æ€æ›´æ–°å¯è§åŒºåŸŸ"]
B --> C["æ»šåŠ¨å<br/>ä¿æŒ30ä¸ªèŠ‚ç‚¹"]
A1["ä¼ ç»Ÿæ–¹å¼<br/>æ¸²æŸ“10000ä¸ªèŠ‚ç‚¹"] --> A2["å†…å­˜å ç”¨é«˜<br/>å¡é¡¿ä¸¥é‡"]
style A fill:#90EE90
style B fill:#90EE90
style C fill:#90EE90
style A1 fill:#FFB6C1
style A2 fill:#FFB6C1
```

**å›¾è¡¨æ¥æº**
- [test/unit/specs/VirtualScroll.spec.js](file://test/unit/specs/VirtualScroll.spec.js#L105-L120)

**èŠ‚æ¥æº**
- [OPTIMIZATION_SUMMARY.md](file://OPTIMIZATION_SUMMARY.md#L149-L161)

## æ•…éšœæ’æŸ¥æŒ‡å—

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### Q: å¼€å¯è™šæ‹Ÿæ»šåŠ¨åé€‰é¡¹é«˜åº¦ä¸ä¸€è‡´ï¼Ÿ

**åŸå› **: CSSæ ·å¼ä¸`option-height`é…ç½®ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**:
```css
.vue-treeselect__option {
  height: 40px !important;        /* ä¸ option-height ä¸€è‡´ */
  line-height: 40px;
  box-sizing: border-box;
}
```

#### Q: æœç´¢ç»“æœæ˜¾ç¤ºä¸å®Œæ•´ï¼Ÿ

**åŸå› **: æœªå¯ç”¨`flatten-search-results`

**è§£å†³æ–¹æ¡ˆ**:
```vue
<treeselect
  :flatten-search-results="true"
/>
```

#### Q: æ»šåŠ¨æ—¶æœ‰é—ªçƒï¼Ÿ

**åŸå› **: `option-height`ä¸å®é™…é«˜åº¦ä¸ä¸€è‡´ï¼Œæˆ–ç¼ºå°‘CSSåŠ¨ç”»ä¼˜åŒ–

**è§£å†³æ–¹æ¡ˆ**:
```css
.vue-treeselect__virtual-list-items {
  will-change: transform;
  transition: transform 0.1s ease-out;
}
```

#### Q: æ€§èƒ½æå‡ä¸æ˜æ˜¾ï¼Ÿ

**æ£€æŸ¥æ¸…å•**:
1. âœ… å·²å¼€å¯`virtual-scroll`
2. âœ… æ­£ç¡®è®¾ç½®äº†`option-height`
3. âœ… å…³é—­äº†ä¸å¿…è¦çš„åŠŸèƒ½ï¼ˆå¦‚`show-count`ï¼‰
4. âœ… å¯ç”¨äº†`cache-options`
5. âœ… CSSæ ·å¼ä¸é…ç½®ä¸€è‡´

### å…¼å®¹æ€§æ³¨æ„äº‹é¡¹

| ç‰¹æ€§ | æœ€ä½ç‰ˆæœ¬è¦æ±‚ | å¤‡æ³¨ |
|------|-------------|------|
| è™šæ‹Ÿæ»šåŠ¨ | Chrome 64+, Firefox 69+ | éœ€è¦`ResizeObserver`æ”¯æŒ |
| æœç´¢é˜²æŠ– | æ‰€æœ‰ç°ä»£æµè§ˆå™¨ | ä½¿ç”¨`lodash.debounce` |
| CSSåŠ¨ç”» | CSS3æ”¯æŒ | `will-change`å±æ€§ |

**èŠ‚æ¥æº**
- [OPTIMIZATION_SUMMARY.md](file://OPTIMIZATION_SUMMARY.md#L266-L380)

## è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®

### æœåŠ¡ç«¯ä¼˜åŒ–ç­–ç•¥

#### 1. åˆ†é¡µåŠ è½½
```javascript
// ä½¿ç”¨ loadOptions å®ç°æŒ‰éœ€åŠ è½½
loadOptions({ action, args, callback }) {
  const { searchQuery } = args;
  api.getOptions({
    query: searchQuery,
    page: currentPage,
    pageSize: 100
  }).then(response => {
    callback(null, response.data);
  });
}
```

#### 2. æ‡’åŠ è½½å­èŠ‚ç‚¹
```javascript
// è®¾ç½® children ä¸º nullï¼Œå±•å¼€æ—¶æ‰åŠ è½½
{
  id: 'parent',
  label: 'çˆ¶èŠ‚ç‚¹',
  children: null, // æ‡’åŠ è½½æ ‡è®°
  isLoaded: false
}
```

#### 3. æ•°æ®é¢„å¤„ç†
- å°†æ·±å±‚æ ‘ç»“æ„æ‰å¹³åŒ–
- ç§»é™¤ä¸å¿…è¦çš„åµŒå¥—å±‚çº§
- é¢„è®¡ç®—å¸¸ç”¨ç»Ÿè®¡æ•°æ®

### æ€§èƒ½ç›‘æ§å·¥å…·

```javascript
// æ€§èƒ½ç›‘æ§ç¤ºä¾‹
class PerformanceMonitor {
  constructor() {
    this.metrics = {};
  }
  
  start(name) {
    this.metrics[name] = performance.now();
  }
  
  end(name) {
    if (this.metrics[name]) {
      this.metrics[`${name}_duration`] = performance.now() - this.metrics[name];
      delete this.metrics[name];
    }
  }
  
  log() {
    console.table(this.metrics);
  }
}
```

### æœ€ä½³å®è·µæ€»ç»“

1. **æ ¸å¿ƒé…ç½®ä¼˜å…ˆçº§**:
   - `virtual-scroll: true`ï¼ˆå¿…é¡»ï¼‰
   - `option-height: 40`ï¼ˆå¿…é¡»ï¼‰
   - `default-expand-level: 0`ï¼ˆå¿…é¡»ï¼‰
   - `flatten-search-results: true`ï¼ˆå¼ºçƒˆæ¨èï¼‰

2. **æ€§èƒ½ä¼˜åŒ–åŸåˆ™**:
   - å‡å°‘DOMèŠ‚ç‚¹æ•°é‡
   - é™ä½å“åº”å¼å±æ€§å¼€é”€
   - é¿å…é¢‘ç¹çš„å…¨é‡è®¡ç®—
   - åˆç†ä½¿ç”¨ç¼“å­˜æœºåˆ¶

3. **æ¸è¿›å¼ä¼˜åŒ–**:
   - ä»å°æ•°æ®é‡å¼€å§‹æµ‹è¯•
   - é€æ­¥å¢åŠ æ•°æ®è§„æ¨¡
   - æŒç»­ç›‘æ§æ€§èƒ½æŒ‡æ ‡
   - æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´é…ç½®

**èŠ‚æ¥æº**
- [PERFORMANCE_OPTIMIZATION_GUIDE.md](file://PERFORMANCE_OPTIMIZATION_GUIDE.md#L196-L213)