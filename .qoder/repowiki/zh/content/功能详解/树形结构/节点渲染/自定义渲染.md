# è‡ªå®šä¹‰æ¸²æŸ“

<cite>
**æœ¬æ–‡æ¡£ä¸­å¼•ç”¨çš„æ–‡ä»¶**
- [Option.vue](file://src/components/Option.vue)
- [Treeselect.vue](file://src/components/Treeselect.vue)
- [VirtualList.vue](file://src/components/VirtualList.vue)
- [Menu.vue](file://src/components/Menu.vue)
- [SingleValue.vue](file://src/components/SingleValue.vue)
- [MultiValue.vue](file://src/components/MultiValue.vue)
- [treeselectMixin.js](file://src/mixins/treeselectMixin.js)
- [Slots.spec.js](file://test/unit/specs/Slots.spec.js)
- [CustomizeOptionLabel.vue](file://docs/components/CustomizeOptionLabel.vue)
- [CustomizeValueLabel.vue](file://docs/components/CustomizeValueLabel.vue)
- [DocSlots.vue](file://docs/components/DocSlots.vue)
- [LargeDataExample.vue](file://src/examples/LargeDataExample.vue)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [Scoped Slotsæ¦‚è¿°](#scoped-slotsæ¦‚è¿°)
3. [option-labelæ’æ§½è¯¦è§£](#option-labelæ’æ§½è¯¦è§£)
4. [value-labelæ’æ§½è¯¦è§£](#value-labelæ’æ§½è¯¦è§£)
5. [å…¶ä»–å¯ç”¨æ’æ§½](#å…¶ä»–å¯ç”¨æ’æ§½)
6. [è‡ªå®šä¹‰æ¸²æŸ“å®ç°](#è‡ªå®šä¹‰æ¸²æŸ“å®ç°)
7. [è™šæ‹Ÿæ»šåŠ¨å…¼å®¹æ€§](#è™šæ‹Ÿæ»šåŠ¨å…¼å®¹æ€§)
8. [æ€§èƒ½ä¼˜åŒ–å»ºè®®](#æ€§èƒ½ä¼˜åŒ–å»ºè®®)
9. [å®Œæ•´ç¤ºä¾‹](#å®Œæ•´ç¤ºä¾‹)
10. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

## ç®€ä»‹

Vue Treeselectæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ ‘å½¢é€‰æ‹©å™¨ç»„ä»¶ï¼Œæä¾›äº†ä¸°å¯Œçš„è‡ªå®šä¹‰æ¸²æŸ“èƒ½åŠ›ã€‚é€šè¿‡scoped slotsæœºåˆ¶ï¼Œå¼€å‘è€…å¯ä»¥å®Œå…¨æ§åˆ¶é€‰é¡¹æ ‡ç­¾ã€å€¼æ ‡ç­¾ä»¥åŠèœå•åˆ—è¡¨çš„æ¸²æŸ“æ–¹å¼ï¼Œå®ç°å¤æ‚çš„UIéœ€æ±‚ã€‚

## Scoped Slotsæ¦‚è¿°

Vue Treeselectæä¾›äº†å¤šä¸ªscoped slotsï¼Œå…è®¸å¼€å‘è€…è‡ªå®šä¹‰ä¸åŒéƒ¨åˆ†çš„æ¸²æŸ“é€»è¾‘ï¼š

```mermaid
graph TB
subgraph "Treeselectç»„ä»¶æ¶æ„"
A[Treeselect] --> B[Menu]
A --> C[Control]
A --> D[HiddenFields]
B --> E[VirtualList]
B --> F[Option]
B --> G[Tip]
F --> H[option-label]
C --> I[value-label]
B --> J[before-list]
B --> K[after-list]
end
subgraph "è‡ªå®šä¹‰æ¸²æŸ“"
L[è‡ªå®šä¹‰æ ‡ç­¾å†…å®¹]
M[å›¾æ ‡é›†æˆ]
N[å¤šå­—æ®µå±•ç¤º]
O[æ¡ä»¶æ ·å¼]
end
H --> L
H --> M
H --> N
H --> O
```

**å›¾è¡¨æ¥æº**
- [Treeselect.vue](file://src/components/Treeselect.vue#L31-L40)
- [Menu.vue](file://src/components/Menu.vue#L74-L89)
- [Option.vue](file://src/components/Option.vue#L182-L198)

## option-labelæ’æ§½è¯¦è§£

### æ’æ§½å‚æ•°

`option-label`æ’æ§½æ˜¯æœ€å¸¸ç”¨çš„è‡ªå®šä¹‰æ¸²æŸ“æ’æ§½ï¼Œå®ƒæ¥æ”¶ä»¥ä¸‹å‚æ•°ï¼š

| å‚æ•°å | ç±»å‹ | æè¿° |
|--------|------|------|
| `node` | Object | å½“å‰é€‰é¡¹èŠ‚ç‚¹å¯¹è±¡ï¼ŒåŒ…å«idã€labelã€childrenç­‰å±æ€§ |
| `shouldShowCount` | Boolean | æ˜¯å¦åº”è¯¥æ˜¾ç¤ºè®¡æ•°å™¨ |
| `count` | Number | é€‰é¡¹çš„è®¡æ•°å€¼ï¼ˆå½“`shouldShowCount`ä¸ºtrueæ—¶æœ‰æ•ˆï¼‰ |
| `labelClassName` | String | é»˜è®¤çš„æ ‡ç­¾ç±»å |
| `countClassName` | String | é»˜è®¤çš„è®¡æ•°å™¨ç±»å |

### åŸºç¡€ä½¿ç”¨ç¤ºä¾‹

```vue
<template>
  <treeselect>
    <label slot="option-label" slot-scope="{ node, shouldShowCount, count, labelClassName, countClassName }">
      {{ node.isBranch ? 'ğŸ“' : 'ğŸ“„' }} {{ node.label }}
      <span v-if="shouldShowCount" :class="countClassName">({{ count }})</span>
    </label>
  </treeselect>
</template>
```

### é«˜çº§è‡ªå®šä¹‰æ¸²æŸ“

```vue
<template>
  <treeselect>
    <div slot="option-label" slot-scope="{ node, shouldShowCount, count, labelClassName, countClassName }" :class="labelClassName">
      <!-- å›¾æ ‡é›†æˆ -->
      <span :class="getNodeIconClass(node)" class="custom-icon"></span>
      
      <!-- ä¸»è¦æ–‡æœ¬ -->
      <span class="main-text">{{ node.label }}</span>
      
      <!-- æ¡ä»¶æ˜¾ç¤ºè®¡æ•° -->
      <span v-if="shouldShowCount" :class="countClassName" class="count-badge">
        ({{ count }})
      </span>
      
      <!-- æ¡ä»¶æ˜¾ç¤ºçŠ¶æ€ -->
      <span v-if="node.isDisabled" class="status-badge disabled">ç¦ç”¨</span>
      <span v-if="node.isHighlighted" class="status-badge highlighted">é€‰ä¸­</span>
    </div>
  </treeselect>
</template>
```

**ç« èŠ‚æ¥æº**
- [Option.vue](file://src/components/Option.vue#L182-L198)
- [CustomizeOptionLabel.vue](file://docs/components/CustomizeOptionLabel.vue#L9-L12)

## value-labelæ’æ§½è¯¦è§£

### æ’æ§½å‚æ•°

`value-label`æ’æ§½ç”¨äºè‡ªå®šä¹‰å•é€‰æ¨¡å¼ä¸‹çš„å€¼æ˜¾ç¤ºï¼š

| å‚æ•°å | ç±»å‹ | æè¿° |
|--------|------|------|
| `node` | Object | å½“å‰é€‰ä¸­çš„èŠ‚ç‚¹å¯¹è±¡ |

### åŸºç¡€ä½¿ç”¨ç¤ºä¾‹

```vue
<template>
  <treeselect :multiple="false">
    <div slot="value-label" slot-scope="{ node }">
      {{ node.raw.customLabel || node.label }}
    </div>
  </treeselect>
</template>
```

### å¤æ‚å€¼æ˜¾ç¤ºç¤ºä¾‹

```vue
<template>
  <treeselect :multiple="false">
    <div slot="value-label" slot-scope="{ node }" class="value-display">
      <!-- ç”¨æˆ·å¤´åƒ -->
      <img v-if="node.raw.avatar" :src="node.raw.avatar" class="avatar">
      
      <!-- ç”¨æˆ·ä¿¡æ¯ -->
      <div class="user-info">
        <span class="username">{{ node.raw.username }}</span>
        <span class="email">{{ node.raw.email }}</span>
      </div>
      
      <!-- è§’è‰²æ ‡ç­¾ -->
      <span v-if="node.raw.role" :class="getRoleClass(node.raw.role)" class="role-tag">
        {{ node.raw.role }}
      </span>
    </div>
  </treeselect>
</template>
```

**ç« èŠ‚æ¥æº**
- [SingleValue.vue](file://src/components/SingleValue.vue#L13-L15)
- [CustomizeValueLabel.vue](file://docs/components/CustomizeValueLabel.vue#L4-L5)

## å…¶ä»–å¯ç”¨æ’æ§½

### before-listæ’æ§½

åœ¨èœå•åˆ—è¡¨ä¹‹å‰æ˜¾ç¤ºçš„å†…å®¹ï¼š

```vue
<template>
  <treeselect>
    <div slot="before-list">
      <h3>å¯é€‰é€‰é¡¹</h3>
      <p>è¯·é€‰æ‹©æ‚¨éœ€è¦çš„é€‰é¡¹</p>
    </div>
    
    <label slot="option-label" slot-scope="{ node }">
      {{ node.label }}
    </label>
  </treeselect>
</template>
```

### after-listæ’æ§½

åœ¨èœå•åˆ—è¡¨ä¹‹åæ˜¾ç¤ºçš„å†…å®¹ï¼š

```vue
<template>
  <treeselect>
    <div slot="after-list">
      <button @click="addNewOption">æ·»åŠ æ–°é€‰é¡¹</button>
    </div>
  </treeselect>
</template>
```

**ç« èŠ‚æ¥æº**
- [Menu.vue](file://src/components/Menu.vue#L92-L107)

## è‡ªå®šä¹‰æ¸²æŸ“å®ç°

### å®ç°æ­¥éª¤

1. **ç¡®å®šè‡ªå®šä¹‰éœ€æ±‚**ï¼šæ˜ç¡®éœ€è¦è‡ªå®šä¹‰çš„éƒ¨åˆ†å’ŒæœŸæœ›çš„æ•ˆæœ
2. **é€‰æ‹©åˆé€‚çš„æ’æ§½**ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©å¯¹åº”çš„scoped slot
3. **ç¼–å†™è‡ªå®šä¹‰æ¨¡æ¿**ï¼šä½¿ç”¨æ’æ§½æä¾›çš„å‚æ•°æ„å»ºè‡ªå®šä¹‰å†…å®¹
4. **æ·»åŠ æ ·å¼**ï¼šç¡®ä¿è‡ªå®šä¹‰å†…å®¹çš„æ ·å¼ä¸æ•´ä½“è®¾è®¡åè°ƒ
5. **å¤„ç†äº¤äº’**ï¼šå®ç°å¿…è¦çš„ç”¨æˆ·äº¤äº’åŠŸèƒ½

### å¤šå­—æ®µå±•ç¤ºå®ç°

```vue
<template>
  <treeselect>
    <div slot="option-label" slot-scope="{ node, shouldShowCount, count }">
      <!-- ä¸»è¦ä¿¡æ¯ -->
      <div class="primary-info">
        <span class="title">{{ node.label }}</span>
        <span class="subtitle">{{ node.raw.description }}</span>
      </div>
      
      <!-- è¾…åŠ©ä¿¡æ¯ -->
      <div class="auxiliary-info">
        <span class="category">{{ node.raw.category }}</span>
        <span class="status">{{ getStatusText(node.raw.status) }}</span>
      </div>
      
      <!-- è®¡æ•°å™¨ -->
      <span v-if="shouldShowCount" class="count">{{ count }}</span>
    </div>
  </treeselect>
</template>

<style>
.primary-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.title {
  font-weight: bold;
  color: #333;
}

.subtitle {
  font-size: 12px;
  color: #666;
}

.auxiliary-info {
  display: flex;
  gap: 8px;
  font-size: 12px;
  color: #999;
}

.category {
  background: #f0f0f0;
  padding: 2px 6px;
  border-radius: 4px;
}

.status {
  background: #e6f7ff;
  padding: 2px 6px;
  border-radius: 4px;
}

.count {
  margin-left: 8px;
  font-size: 12px;
  color: #999;
}
</style>
```

### å›¾æ ‡é›†æˆå®ç°

```vue
<template>
  <treeselect>
    <div slot="option-label" slot-scope="{ node }">
      <!-- åŠ¨æ€å›¾æ ‡ -->
      <span :class="getIconClass(node)" class="tree-icon"></span>
      
      <!-- æ–‡æœ¬å†…å®¹ -->
      <span class="node-label">{{ node.label }}</span>
      
      <!-- ç‰¹æ®Šæ ‡è®° -->
      <span v-if="node.raw.special" class="special-marker">â˜…</span>
    </div>
  </treeselect>
</template>

<script>
export default {
  methods: {
    getIconClass(node) {
      if (node.isBranch) {
        return node.isExpanded ? 'icon-folder-open' : 'icon-folder';
      }
      return 'icon-file';
    }
  }
}
</script>

<style>
.tree-icon {
  margin-right: 8px;
  font-size: 16px;
  color: #409EFF;
}

.node-label {
  flex-grow: 1;
}

.special-marker {
  margin-left: 8px;
  color: #FF9800;
  font-size: 14px;
}
</style>
```

## è™šæ‹Ÿæ»šåŠ¨å…¼å®¹æ€§

### è™šæ‹Ÿæ»šåŠ¨æ¨¡å¼ä¸‹çš„æ³¨æ„äº‹é¡¹

å½“å¯ç”¨è™šæ‹Ÿæ»šåŠ¨(`virtual-scroll="true"`)æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š

1. **æ€§èƒ½è€ƒè™‘**ï¼šè™šæ‹Ÿæ»šåŠ¨ä¼šé™åˆ¶åŒæ—¶æ¸²æŸ“çš„èŠ‚ç‚¹æ•°é‡ï¼Œé¿å…ä¸€æ¬¡æ€§æ¸²æŸ“å¤§é‡DOMå…ƒç´ 
2. **åŠ¨æ€å†…å®¹**ï¼šç¡®ä¿è‡ªå®šä¹‰å†…å®¹èƒ½å¤Ÿæ­£ç¡®å“åº”æ•°æ®å˜åŒ–
3. **æ ·å¼ä¸€è‡´æ€§**ï¼šä¿æŒä¸éè™šæ‹Ÿæ»šåŠ¨æ¨¡å¼ä¸‹çš„è§†è§‰æ•ˆæœä¸€è‡´

### è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–ç¤ºä¾‹

```vue
<template>
  <treeselect
    :virtual-scroll="true"
    :option-height="40"
    :options="largeOptions"
  >
    <div slot="option-label" slot-scope="{ node }">
      <!-- ç®€åŒ–çš„æ¸²æŸ“å†…å®¹ -->
      <span :class="getIconClass(node.isBranch)"></span>
      <span>{{ node.label }}</span>
    </div>
  </treeselect>
</template>

<script>
export default {
  data() {
    return {
      largeOptions: this.generateLargeDataset(10000)
    };
  },
  
  methods: {
    generateLargeDataset(count) {
      // ç”Ÿæˆå¤§é‡æ•°æ®ï¼Œä½†ä¿æŒç®€å•çš„æ¸²æŸ“ç»“æ„
      return Array.from({ length: count }, (_, i) => ({
        id: `item-${i}`,
        label: `é€‰é¡¹ ${i + 1}`,
        isBranch: i % 10 === 0, // æ¯10ä¸ªèŠ‚ç‚¹æœ‰ä¸€ä¸ªåˆ†æ”¯èŠ‚ç‚¹
        raw: {
          description: `è¿™æ˜¯ç¬¬ ${i + 1} ä¸ªé€‰é¡¹çš„æè¿°`
        }
      }));
    },
    
    getIconClass(isBranch) {
      return isBranch ? 'folder-icon' : 'file-icon';
    }
  }
}
</script>
```

**ç« èŠ‚æ¥æº**
- [VirtualList.vue](file://src/components/VirtualList.vue#L160-L179)
- [LargeDataExample.vue](file://src/examples/LargeDataExample.vue#L26-L35)

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–

1. **ç®€åŒ–è‡ªå®šä¹‰å†…å®¹**ï¼šåœ¨è™šæ‹Ÿæ»šåŠ¨æ¨¡å¼ä¸‹ï¼Œå°½é‡ä¿æŒæ¸²æŸ“å†…å®¹ç®€å•
2. **é¿å…å¤æ‚è®¡ç®—**ï¼šå‡å°‘åœ¨æ’æ§½æ¨¡æ¿ä¸­çš„è®¡ç®—é€»è¾‘
3. **ä½¿ç”¨CSSåŠ¨ç”»**ï¼šä¼˜å…ˆä½¿ç”¨CSSåŠ¨ç”»è€ŒéJavaScriptåŠ¨ç”»
4. **æ‡’åŠ è½½èµ„æº**ï¼šå¯¹äºå›¾ç‰‡ç­‰èµ„æºï¼Œè€ƒè™‘ä½¿ç”¨æ‡’åŠ è½½

### å†…å­˜ç®¡ç†

1. **åŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨**ï¼šç¡®ä¿åœ¨ç»„ä»¶é”€æ¯æ—¶æ¸…ç†æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨
2. **é¿å…å†…å­˜æ³„æ¼**ï¼šä¸è¦åœ¨æ’æ§½å‡½æ•°ä¸­åˆ›å»ºé—­åŒ…å¼•ç”¨å¤§é‡æ•°æ®
3. **åˆç†ä½¿ç”¨ç¼“å­˜**ï¼šå¯¹äºé™æ€å†…å®¹ï¼Œè€ƒè™‘ä½¿ç”¨ç¼“å­˜æœºåˆ¶

### ç¤ºä¾‹ä¼˜åŒ–ä»£ç 

```vue
<template>
  <treeselect :virtual-scroll="true" :option-height="40">
    <div slot="option-label" slot-scope="{ node }">
      <!-- ä¼˜åŒ–çš„æ¸²æŸ“ç»“æ„ -->
      <span :class="getNodeIcon(node)" class="node-icon"></span>
      <span class="node-text">{{ node.label }}</span>
      <span v-if="shouldShowBadge(node)" class="node-badge">{{ getBadgeText(node) }}</span>
    </div>
  </treeselect>
</template>

<script>
export default {
  methods: {
    // ç¼“å­˜å›¾æ ‡ç±»åï¼Œé¿å…é‡å¤è®¡ç®—
    getNodeIcon(node) {
      if (!this.iconCache) {
        this.iconCache = {};
      }
      
      if (!this.iconCache[node.id]) {
        this.iconCache[node.id] = this.calculateIconClass(node);
      }
      
      return this.iconCache[node.id];
    },
    
    calculateIconClass(node) {
      return node.isBranch ? 'folder-icon' : 'file-icon';
    },
    
    // é¢„è®¡ç®—å¾½ç« æ˜¾ç¤ºé€»è¾‘
    shouldShowBadge(node) {
      return node.raw && node.raw.priority;
    },
    
    getBadgeText(node) {
      return node.raw.priority === 1 ? 'é«˜' : 'ä¸­';
    }
  },
  
  beforeDestroy() {
    // æ¸…ç†ç¼“å­˜
    this.iconCache = null;
  }
}
</script>
```

## å®Œæ•´ç¤ºä¾‹

### å¤æ‚è‡ªå®šä¹‰æ¸²æŸ“ç¤ºä¾‹

```vue
<template>
  <div class="advanced-tree-select">
    <treeselect
      v-model="selectedValue"
      :options="treeOptions"
      :multiple="true"
      :virtual-scroll="true"
      :option-height="48"
      :show-count="true"
      :default-expand-level="1"
      placeholder="é€‰æ‹©éƒ¨é—¨æˆ–å‘˜å·¥..."
    >
      <!-- è‡ªå®šä¹‰é€‰é¡¹æ ‡ç­¾ -->
      <div slot="option-label" slot-scope="{ node, shouldShowCount, count, labelClassName }">
        <div class="option-wrapper" :class="{ 'is-branch': node.isBranch }">
          <!-- å›¾æ ‡åŒºåŸŸ -->
          <span :class="getNodeIconClass(node)" class="option-icon"></span>
          
          <!-- å†…å®¹åŒºåŸŸ -->
          <div class="option-content">
            <div class="option-main">
              <span :class="labelClassName">{{ node.label }}</span>
              <span v-if="shouldShowCount" class="option-count">({{ count }})</span>
            </div>
            
            <!-- è¾…åŠ©ä¿¡æ¯ -->
            <div v-if="node.raw" class="option-meta">
              <span v-if="node.raw.department" class="meta-dept">{{ node.raw.department }}</span>
              <span v-if="node.raw.position" class="meta-position">{{ node.raw.position }}</span>
            </div>
          </div>
          
          <!-- æ“ä½œæŒ‰é’® -->
          <div v-if="node.raw && node.raw.actions" class="option-actions">
            <button v-for="action in node.raw.actions" 
                    :key="action.type"
                    @click.stop="handleAction(action.type, node)"
                    class="action-btn">
              {{ action.label }}
            </button>
          </div>
        </div>
      </div>
      
      <!-- è‡ªå®šä¹‰å€¼æ ‡ç­¾ -->
      <div slot="value-label" slot-scope="{ node }">
        <div class="value-display">
          <span :class="getNodeIconClass(node)" class="value-icon"></span>
          <span>{{ node.label }}</span>
        </div>
      </div>
      
      <!-- èœå•å‰ç¼€ -->
      <div slot="before-list" class="menu-prefix">
        <div class="filter-controls">
          <input v-model="searchQuery" placeholder="æœç´¢..." class="search-input">
          <select v-model="filterStatus" class="status-filter">
            <option value="">å…¨éƒ¨çŠ¶æ€</option>
            <option value="active">æ´»è·ƒ</option>
            <option value="inactive">ä¸æ´»è·ƒ</option>
          </select>
        </div>
      </div>
      
      <!-- èœå•åç¼€ -->
      <div slot="after-list" class="menu-suffix">
        <button @click="loadMore" class="load-more-btn">
          åŠ è½½æ›´å¤š...
        </button>
      </div>
    </treeselect>
  </div>
</template>

<script>
export default {
  data() {
    return {
      selectedValue: [],
      treeOptions: [],
      searchQuery: '',
      filterStatus: '',
      currentPage: 1
    };
  },
  
  computed: {
    filteredOptions() {
      // æ ¹æ®æœç´¢å’Œè¿‡æ»¤æ¡ä»¶ç­›é€‰é€‰é¡¹
      return this.treeOptions.filter(node => {
        const matchesSearch = node.label.toLowerCase().includes(this.searchQuery.toLowerCase());
        const matchesStatus = !this.filterStatus || (node.raw && node.raw.status === this.filterStatus);
        return matchesSearch && matchesStatus;
      });
    }
  },
  
  methods: {
    getNodeIconClass(node) {
      if (node.isBranch) {
        return node.isExpanded ? 'icon-folder-open' : 'icon-folder';
      }
      return 'icon-user';
    },
    
    handleAction(actionType, node) {
      // å¤„ç†é€‰é¡¹æ“ä½œ
      switch (actionType) {
        case 'edit':
          this.editNode(node);
          break;
        case 'delete':
          this.deleteNode(node);
          break;
        case 'share':
          this.shareNode(node);
          break;
      }
    },
    
    editNode(node) {
      // ç¼–è¾‘èŠ‚ç‚¹é€»è¾‘
      console.log('ç¼–è¾‘èŠ‚ç‚¹:', node);
    },
    
    deleteNode(node) {
      // åˆ é™¤èŠ‚ç‚¹é€»è¾‘
      console.log('åˆ é™¤èŠ‚ç‚¹:', node);
    },
    
    shareNode(node) {
      // åˆ†äº«èŠ‚ç‚¹é€»è¾‘
      console.log('åˆ†äº«èŠ‚ç‚¹:', node);
    },
    
    loadMore() {
      // åŠ è½½æ›´å¤šæ•°æ®
      this.currentPage++;
      // æ¨¡æ‹Ÿå¼‚æ­¥åŠ è½½
      setTimeout(() => {
        const newOptions = this.generateMoreOptions();
        this.treeOptions = [...this.treeOptions, ...newOptions];
      }, 500);
    },
    
    generateMoreOptions() {
      // ç”Ÿæˆæ›´å¤šé€‰é¡¹
      return Array.from({ length: 20 }, (_, i) => ({
        id: `more-${this.currentPage}-${i}`,
        label: `æ›´å¤šé€‰é¡¹ ${this.currentPage}-${i}`,
        isBranch: i % 3 === 0,
        raw: {
          department: `éƒ¨é—¨ ${Math.floor(Math.random() * 5) + 1}`,
          position: ['ç»ç†', 'ä¸»ç®¡', 'å‘˜å·¥'][Math.floor(Math.random() * 3)],
          status: Math.random() > 0.5 ? 'active' : 'inactive'
        }
      }));
    }
  },
  
  created() {
    // åˆå§‹åŒ–æ ‘å½¢æ•°æ®
    this.treeOptions = this.generateInitialOptions();
  },
  
  mounted() {
    // æ·»åŠ å…¨å±€ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
    document.addEventListener('click', this.handleClickOutside);
  },
  
  beforeDestroy() {
    // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
    document.removeEventListener('click', this.handleClickOutside);
  }
};
</script>

<style scoped>
.advanced-tree-select {
  width: 100%;
  max-width: 600px;
}

.option-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px;
  border-radius: 4px;
  transition: background-color 0.2s;
}

.option-wrapper:hover {
  background-color: #f5f7fa;
}

.option-icon {
  font-size: 18px;
  color: #409EFF;
}

.option-content {
  flex-grow: 1;
}

.option-main {
  display: flex;
  align-items: center;
  gap: 8px;
}

.option-count {
  font-size: 12px;
  color: #909399;
}

.option-meta {
  display: flex;
  gap: 8px;
  font-size: 12px;
  color: #909399;
}

.option-actions {
  display: flex;
  gap: 4px;
}

.action-btn {
  padding: 2px 8px;
  font-size: 12px;
  border: 1px solid #dcdfe6;
  border-radius: 4px;
  background: transparent;
  cursor: pointer;
  transition: all 0.2s;
}

.action-btn:hover {
  background-color: #f0f9eb;
  border-color: #e1f3d8;
  color: #67C23A;
}

.value-display {
  display: flex;
  align-items: center;
  gap: 8px;
}

.menu-prefix {
  padding: 8px;
  border-bottom: 1px solid #ebeef5;
}

.filter-controls {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}

.search-input {
  flex-grow: 1;
  padding: 4px 8px;
  border: 1px solid #dcdfe6;
  border-radius: 4px;
}

.status-filter {
  padding: 4px 8px;
  border: 1px solid #dcdfe6;
  border-radius: 4px;
}

.load-more-btn {
  width: 100%;
  padding: 8px;
  text-align: center;
  background: #f5f7fa;
  border: none;
  border-top: 1px solid #ebeef5;
  cursor: pointer;
  transition: background-color 0.2s;
}

.load-more-btn:hover {
  background-color: #ebedf0;
}
</style>
```

## æœ€ä½³å®è·µ

### 1. ä¿æŒä»£ç å¯ç»´æŠ¤æ€§

```vue
<!-- æ¨èï¼šå°†å¤æ‚é€»è¾‘æå–åˆ°æ–¹æ³•ä¸­ -->
<template>
  <treeselect>
    <div slot="option-label" slot-scope="{ node }">
      <NodeRenderer :node="node" />
    </div>
  </treeselect>
</template>

<script>
import NodeRenderer from './NodeRenderer.vue';

export default {
  components: { NodeRenderer }
};
</script>
```

### 2. åˆç†ä½¿ç”¨CSSç±»å

```vue
<template>
  <treeselect>
    <div slot="option-label" slot-scope="{ node, labelClassName, countClassName }">
      <span :class="[labelClassName, 'custom-label']">{{ node.label }}</span>
      <span v-if="shouldShowCount(node)" :class="[countClassName, 'custom-count']">
        ({{ getCount(node) }})
      </span>
    </div>
  </treeselect>
</template>
```

### 3. å¤„ç†è¾¹ç•Œæƒ…å†µ

```vue
<template>
  <treeselect>
    <div slot="option-label" slot-scope="{ node }">
      <span v-if="node.label" :class="getNodeClass(node)">
        {{ node.label }}
      </span>
      <span v-else class="empty-label">æ— æ ‡é¢˜</span>
    </div>
  </treeselect>
</template>

<script>
export default {
  methods: {
    getNodeClass(node) {
      return {
        'node-active': node.isActive,
        'node-disabled': node.isDisabled,
        'node-selected': node.isSelected
      };
    }
  }
}
</script>
```

### 4. æ€§èƒ½ç›‘æ§

```vue
<template>
  <treeselect>
    <div slot="option-label" slot-scope="{ node }">
      <!-- ä½¿ç”¨æ€§èƒ½å‹å¥½çš„æ¸²æŸ“æ–¹å¼ -->
      <span>{{ node.label }}</span>
      <span v-if="node.raw && node.raw.timestamp">
        {{ formatTimestamp(node.raw.timestamp) }}
      </span>
    </div>
  </treeselect>
</template>

<script>
export default {
  methods: {
    // ç¼“å­˜æ ¼å¼åŒ–ç»“æœ
    formatTimestamp(timestamp) {
      if (!this.timestampCache) {
        this.timestampCache = {};
      }
      
      if (!this.timestampCache[timestamp]) {
        this.timestampCache[timestamp] = this.formatDate(new Date(timestamp));
      }
      
      return this.timestampCache[timestamp];
    }
  }
}
</script>
```

é€šè¿‡ä»¥ä¸Šè¯¦ç»†çš„æ–‡æ¡£è¯´æ˜ï¼Œå¼€å‘è€…å¯ä»¥å……åˆ†åˆ©ç”¨Vue Treeselectçš„scoped slotsæœºåˆ¶ï¼Œå®ç°ä¸°å¯Œè€Œçµæ´»çš„è‡ªå®šä¹‰æ¸²æŸ“æ•ˆæœï¼ŒåŒæ—¶ä¿æŒè‰¯å¥½çš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚