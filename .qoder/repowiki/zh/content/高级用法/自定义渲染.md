# è‡ªå®šä¹‰æ¸²æŸ“

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**  
- [Option.vue](file://src/components/Option.vue)
- [SingleValue.vue](file://src/components/SingleValue.vue)
- [MultiValueItem.vue](file://src/components/MultiValueItem.vue)
- [Menu.vue](file://src/components/Menu.vue)
- [treeselectMixin.js](file://src/mixins/treeselectMixin.js)
- [LargeDataExample.vue](file://src/examples/LargeDataExample.vue)
- [Slots.spec.js](file://test/unit/specs/Slots.spec.js)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [ä½œç”¨åŸŸæ’æ§½æ¦‚è¿°](#ä½œç”¨åŸŸæ’æ§½æ¦‚è¿°)
3. [é€‰é¡¹æ ‡ç­¾è‡ªå®šä¹‰ï¼ˆoption-labelï¼‰](#é€‰é¡¹æ ‡ç­¾è‡ªå®šä¹‰option-label)
4. [é€‰ä¸­å€¼æ ‡ç­¾è‡ªå®šä¹‰ï¼ˆvalue-labelï¼‰](#é€‰ä¸­å€¼æ ‡ç­¾è‡ªå®šä¹‰value-label)
5. [åˆ—è¡¨å‰åå†…å®¹æ’æ§½ï¼ˆbefore-list ä¸ after-listï¼‰](#åˆ—è¡¨å‰åå†…å®¹æ’æ§½before-list-ä¸-after-list)
6. [å•é€‰ä¸å¤šé€‰æ¨¡å¼ä¸‹çš„æ’æ§½è¡Œä¸ºå·®å¼‚](#å•é€‰ä¸å¤šé€‰æ¨¡å¼ä¸‹çš„æ’æ§½è¡Œä¸ºå·®å¼‚)
7. [æ’æ§½ä¸Šä¸‹æ–‡æ•°æ®ç»“æ„è¯¦è§£](#æ’æ§½ä¸Šä¸‹æ–‡æ•°æ®ç»“æ„è¯¦è§£)
8. [å®ç°äº¤äº’å¼å†…å®¹](#å®ç°äº¤äº’å¼å†…å®¹)
9. [ç»“åˆ render å‡½æ•°ä¸å­ç»„ä»¶çš„æ’æ§½ä¼ é€’æœºåˆ¶](#ç»“åˆ-render-å‡½æ•°ä¸å­ç»„ä»¶çš„æ’æ§½ä¼ é€’æœºåˆ¶)
10. [æœ€ä½³å®è·µä¸æ€§èƒ½å»ºè®®](#æœ€ä½³å®è·µä¸æ€§èƒ½å»ºè®®)

## ç®€ä»‹
`vue-treeselect` æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Vue.js æ ‘å½¢é€‰æ‹©å™¨ç»„ä»¶ï¼Œæ”¯æŒé€šè¿‡ä½œç”¨åŸŸæ’æ§½ï¼ˆscoped slotsï¼‰æ¥è‡ªå®šä¹‰å…¶ UI æ¸²æŸ“ã€‚ä½œç”¨åŸŸæ’æ§½å…è®¸å¼€å‘è€…åœ¨ä¿æŒç»„ä»¶é€»è¾‘ä¸å˜çš„å‰æä¸‹ï¼Œå®Œå…¨æ›¿æ¢é»˜è®¤çš„è§†è§‰å‘ˆç°ï¼Œä»è€Œå®ç°é«˜åº¦å®šåˆ¶åŒ–çš„ç”¨æˆ·ç•Œé¢ã€‚æœ¬æ–‡æ¡£å°†æ·±å…¥è®²è§£å¦‚ä½•ä½¿ç”¨ `vue-treeselect` çš„ä½œç”¨åŸŸæ’æ§½æ¥è‡ªå®šä¹‰é€‰é¡¹ã€é€‰ä¸­å€¼å’Œå¤šé€‰æ ‡ç­¾çš„æ¸²æŸ“ã€‚

**Section sources**
- [Option.vue](file://src/components/Option.vue)
- [SingleValue.vue](file://src/components/SingleValue.vue)

## ä½œç”¨åŸŸæ’æ§½æ¦‚è¿°
ä½œç”¨åŸŸæ’æ§½æ˜¯ Vue.js æä¾›çš„ä¸€ç§é«˜çº§ç‰¹æ€§ï¼Œå®ƒå…è®¸çˆ¶ç»„ä»¶è®¿é—®å­ç»„ä»¶å†…éƒ¨çš„æ•°æ®æ¥æ¸²æŸ“å†…å®¹ã€‚åœ¨ `vue-treeselect` ä¸­ï¼Œä½œç”¨åŸŸæ’æ§½æ˜¯å®ç° UI å®šåˆ¶çš„æ ¸å¿ƒæœºåˆ¶ã€‚é€šè¿‡åœ¨ `<treeselect>` ç»„ä»¶ä¸­ä½¿ç”¨ `slot-scope` æˆ– `v-slot` è¯­æ³•ï¼Œå¼€å‘è€…å¯ä»¥æ¥æ”¶æ¥è‡ªç»„ä»¶å†…éƒ¨çš„ä¸Šä¸‹æ–‡æ•°æ®ï¼Œå¹¶åˆ©ç”¨è¿™äº›æ•°æ®æ„å»ºè‡ªå®šä¹‰çš„æ¨¡æ¿ã€‚

`vue-treeselect` æš´éœ²äº†å¤šä¸ªä½œç”¨åŸŸæ’æ§½ï¼Œä¸»è¦åŒ…æ‹¬ï¼š
- `option-label`ï¼šç”¨äºè‡ªå®šä¹‰ä¸‹æ‹‰èœå•ä¸­æ¯ä¸ªé€‰é¡¹çš„æ˜¾ç¤ºå†…å®¹ã€‚
- `value-label`ï¼šç”¨äºè‡ªå®šä¹‰å·²é€‰ä¸­å€¼åœ¨é€‰æ‹©æ¡†ä¸­çš„æ˜¾ç¤ºå†…å®¹ã€‚
- `before-list` å’Œ `after-list`ï¼šç”¨äºåœ¨é€‰é¡¹åˆ—è¡¨çš„å‰åæ’å…¥è‡ªå®šä¹‰å†…å®¹ã€‚

è¿™äº›æ’æ§½ä½¿å¾—å¼€å‘è€…å¯ä»¥è½»æ¾åœ°é›†æˆå›¾æ ‡ã€çŠ¶æ€æ ‡è®°ã€å¯Œæ–‡æœ¬å†…å®¹ï¼Œç”šè‡³å¯äº¤äº’çš„å…ƒç´ ã€‚

**Section sources**
- [Option.vue](file://src/components/Option.vue)
- [Menu.vue](file://src/components/Menu.vue)
- [treeselectMixin.js](file://src/mixins/treeselectMixin.js)

## é€‰é¡¹æ ‡ç­¾è‡ªå®šä¹‰ï¼ˆoption-labelï¼‰

`option-label` æ’æ§½ç”¨äºè‡ªå®šä¹‰ä¸‹æ‹‰èœå•ä¸­æ¯ä¸ªé€‰é¡¹çš„æ¸²æŸ“ã€‚å½“ç»„ä»¶éœ€è¦æ¸²æŸ“ä¸€ä¸ªé€‰é¡¹æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨ `option-label` æ’æ§½ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™è°ƒç”¨è¯¥æ’æ§½å¹¶ä¼ å…¥ä¸€ä¸ªåŒ…å«èŠ‚ç‚¹ä¿¡æ¯çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼›å¦åˆ™ï¼Œä½¿ç”¨é»˜è®¤çš„æ¸²æŸ“é€»è¾‘ã€‚

åœ¨ `Option.vue` ç»„ä»¶çš„ `renderLabel` æ–¹æ³•ä¸­ï¼Œå¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°è¿™ä¸€æœºåˆ¶çš„å®ç°ï¼š

```javascript
renderLabel() {
  const { instance, node } = this
  // ... è®¡ç®— shouldShowCount, count ç­‰ ...
  const customLabelRenderer = instance.$scopedSlots['option-label']

  if (customLabelRenderer) return customLabelRenderer({
    node,
    shouldShowCount,
    count,
    labelClassName,
    countClassName,
  })

  // é»˜è®¤æ¸²æŸ“é€»è¾‘
  return (
    <label class={labelClassName}>
      {node.label}
      {shouldShowCount && (
        <span class={countClassName}>({count})</span>
      )}
    </label>
  )
}
```

æ­¤ä»£ç è¡¨æ˜ï¼Œ`option-label` æ’æ§½æ¥æ”¶ä¸€ä¸ªåŒ…å« `node`ã€`shouldShowCount`ã€`count`ã€`labelClassName` å’Œ `countClassName` ç­‰å±æ€§çš„å¯¹è±¡ã€‚å¼€å‘è€…å¯ä»¥åˆ©ç”¨è¿™äº›æ•°æ®æ¥æ„å»ºå¤æ‚çš„ UIã€‚

ä¾‹å¦‚ï¼Œæ ¹æ® `node.isBranch` å±æ€§æ¥åŒºåˆ†åˆ†æ”¯èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹ï¼Œå¹¶æ˜¾ç¤ºä¸åŒçš„å‰ç¼€ï¼š

```vue
<template slot="option-label" slot-scope="{ node, shouldShowCount, count, labelClassName, countClassName }">
  <label :class="labelClassName">
    {{ node.isBranch ? 'ğŸ“' : 'ğŸ“„' }} {{ node.label }}
    <span v-if="shouldShowCount" :class="countClassName">({{ count }})</span>
  </label>
</template>
```

**Section sources**
- [Option.vue](file://src/components/Option.vue#L166-L198)
- [Slots.spec.js](file://test/unit/specs/Slots.spec.js#L26-L31)

## é€‰ä¸­å€¼æ ‡ç­¾è‡ªå®šä¹‰ï¼ˆvalue-labelï¼‰

`value-label` æ’æ§½ç”¨äºè‡ªå®šä¹‰å·²é€‰ä¸­å€¼åœ¨é€‰æ‹©æ¡†ä¸­çš„æ˜¾ç¤ºã€‚å…¶è¡Œä¸ºåœ¨å•é€‰å’Œå¤šé€‰æ¨¡å¼ä¸‹æœ‰æ‰€ä¸åŒã€‚

åœ¨å•é€‰æ¨¡å¼ä¸‹ï¼Œ`SingleValue.vue` ç»„ä»¶è´Ÿè´£æ¸²æŸ“é€‰ä¸­å€¼ã€‚å…¶ `renderSingleValueLabel` æ–¹æ³•ä¼šæ£€æŸ¥ `value-label` æ’æ§½ï¼š

```javascript
renderSingleValueLabel() {
  const { instance } = this
  const node = instance.selectedNodes[0]
  const customValueLabelRenderer = instance.$scopedSlots['value-label']
  return customValueLabelRenderer
    ? customValueLabelRenderer({ node })
    : node.label
}
```

åœ¨å¤šé€‰æ¨¡å¼ä¸‹ï¼Œ`MultiValueItem.vue` ç»„ä»¶è´Ÿè´£æ¸²æŸ“æ¯ä¸€ä¸ªè¢«é€‰ä¸­çš„æ ‡ç­¾ã€‚å…¶ `render` æ–¹æ³•åŒæ ·ä¼šæ£€æŸ¥ `value-label` æ’æ§½ï¼š

```javascript
render() {
  const { instance, node } = this
  const customValueLabelRenderer = instance.$scopedSlots['value-label']
  const labelRenderer = customValueLabelRenderer ? customValueLabelRenderer({ node }) : node.label

  return (
    <div class="vue-treeselect__multi-value-item-container">
      <div class={itemClass} onMousedown={this.handleMouseDown}>
        <span class="vue-treeselect__multi-value-label">{ labelRenderer }</span>
        <span class="vue-treeselect__icon vue-treeselect__value-remove"><DeleteIcon /></span>
      </div>
    </div>
  )
}
```

è¿™è¡¨æ˜ï¼Œ`value-label` æ’æ§½æ¥æ”¶ä¸€ä¸ªåŒ…å« `node` å¯¹è±¡çš„ä¸Šä¸‹æ–‡ã€‚å¼€å‘è€…å¯ä»¥åˆ©ç”¨ `node` å¯¹è±¡çš„ä»»ä½•å±æ€§æ¥æ„å»ºè‡ªå®šä¹‰æ ‡ç­¾ã€‚

ä¾‹å¦‚ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªæ ‡ç­¾æ·»åŠ ä¸€ä¸ªçŠ¶æ€å›¾æ ‡ï¼š

```vue
<template slot="value-label" slot-scope="{ node }">
  <span>{{ node.status === 'active' ? 'ğŸŸ¢' : 'ğŸ”´' }} {{ node.label }}</span>
</template>
```

**Section sources**
- [SingleValue.vue](file://src/components/SingleValue.vue#L9-L17)
- [MultiValueItem.vue](file://src/components/MultiValueItem.vue#L31-L33)

## åˆ—è¡¨å‰åå†…å®¹æ’æ§½ï¼ˆbefore-list ä¸ after-listï¼‰

`before-list` å’Œ `after-list` æ’æ§½å…è®¸å¼€å‘è€…åœ¨é€‰é¡¹åˆ—è¡¨çš„ä¸Šæ–¹å’Œä¸‹æ–¹æ’å…¥è‡ªå®šä¹‰å†…å®¹ã€‚è¿™åœ¨éœ€è¦æ·»åŠ æœç´¢æç¤ºã€åŠ è½½çŠ¶æ€ã€åˆ†é¡µæ§ä»¶æˆ–æ“ä½œæŒ‰é’®æ—¶éå¸¸æœ‰ç”¨ã€‚

åœ¨ `Menu.vue` ç»„ä»¶ä¸­ï¼Œ`renderBeforeList` å’Œ `renderAfterList` æ–¹æ³•å®ç°äº†è¿™ä¸¤ä¸ªæ’æ§½ï¼š

```javascript
renderBeforeList() {
  const { instance } = this
  const beforeListRenderer = instance.$scopedSlots['before-list']
  return beforeListRenderer ? beforeListRenderer() : null
}

renderAfterList() {
  const { instance } = this
  const afterListRenderer = instance.$scopedSlots['after-list']
  return afterListRenderer ? afterListRenderer() : null
}
```

è¿™ä¸¤ä¸ªæ–¹æ³•ç›´æ¥è°ƒç”¨æ’æ§½æ¸²æŸ“å‡½æ•°ï¼Œä¸ä¼ é€’ä»»ä½•å‚æ•°ã€‚è¿™æ„å‘³ç€è¿™äº›æ’æ§½ä¸»è¦ç”¨äºæ’å…¥é™æ€æˆ–ä¸ç»„ä»¶çŠ¶æ€ç›¸å…³çš„åŠ¨æ€å†…å®¹ã€‚

ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨åˆ—è¡¨ä¸Šæ–¹æ·»åŠ ä¸€ä¸ªæœç´¢æç¤ºï¼š

```vue
<template slot="before-list">
  <div class="search-hint">è¾“å…¥å…³é”®è¯ä»¥ç­›é€‰é€‰é¡¹</div>
</template>
```

**Section sources**
- [Menu.vue](file://src/components/Menu.vue#L92-L108)

## å•é€‰ä¸å¤šé€‰æ¨¡å¼ä¸‹çš„æ’æ§½è¡Œä¸ºå·®å¼‚

`value-label` æ’æ§½åœ¨å•é€‰å’Œå¤šé€‰æ¨¡å¼ä¸‹çš„è¡Œä¸ºæœ‰æ˜¾è‘—å·®å¼‚ã€‚

åœ¨å•é€‰æ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸€ä¸ªé€‰ä¸­å€¼ï¼Œå› æ­¤ `value-label` æ’æ§½åªè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œç”¨äºæ¸²æŸ“ `SingleValue.vue` ç»„ä»¶ä¸­çš„å•ä¸ªæ ‡ç­¾ã€‚

åœ¨å¤šé€‰æ¨¡å¼ä¸‹ï¼Œ`value-label` æ’æ§½ä¼šè¢«è°ƒç”¨å¤šæ¬¡ï¼Œæ¯æ¬¡è°ƒç”¨å¯¹åº”ä¸€ä¸ªè¢«é€‰ä¸­çš„èŠ‚ç‚¹ã€‚æ¯ä¸ªè°ƒç”¨éƒ½å‘ç”Ÿåœ¨ `MultiValueItem.vue` ç»„ä»¶çš„å®ä¾‹ä¸­ï¼Œç”¨äºæ¸²æŸ“ä¸€ä¸ªç‹¬ç«‹çš„æ ‡ç­¾é¡¹ã€‚è¿™æ„å‘³ç€åœ¨å¤šé€‰æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªæ ‡ç­¾éƒ½å¯ä»¥æ ¹æ®å…¶å¯¹åº”çš„ `node` æ•°æ®è¿›è¡Œä¸ªæ€§åŒ–æ¸²æŸ“ã€‚

æ­¤å¤–ï¼Œå¤šé€‰æ¨¡å¼ä¸‹çš„æ ‡ç­¾æ˜¯å¯ç‚¹å‡»çš„ï¼ˆé€šè¿‡ `handleMouseDown` äº‹ä»¶å¤„ç†å‡½æ•°ï¼‰ï¼Œç‚¹å‡»åä¼šè§¦å‘ `select` æ–¹æ³•ï¼Œä»è€Œå–æ¶ˆé€‰ä¸­è¯¥èŠ‚ç‚¹ã€‚è¿™ä¸ºå®ç°äº¤äº’å¼æ ‡ç­¾æä¾›äº†åŸºç¡€ã€‚

**Section sources**
- [SingleValue.vue](file://src/components/SingleValue.vue)
- [MultiValueItem.vue](file://src/components/MultiValueItem.vue)

## æ’æ§½ä¸Šä¸‹æ–‡æ•°æ®ç»“æ„è¯¦è§£

ç†è§£ä½œç”¨åŸŸæ’æ§½æš´éœ²çš„æ•°æ®ç»“æ„æ˜¯å®ç°æœ‰æ•ˆè‡ªå®šä¹‰çš„å…³é”®ã€‚

- **`option-label` æ’æ§½ä¸Šä¸‹æ–‡**ï¼š
  - `node`: å½“å‰é€‰é¡¹çš„èŠ‚ç‚¹å¯¹è±¡ï¼ŒåŒ…å« `id`ã€`label`ã€`isBranch`ã€`level`ã€`index` ç­‰å±æ€§ã€‚
  - `shouldShowCount`: å¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦åº”æ˜¾ç¤ºå­èŠ‚ç‚¹è®¡æ•°ã€‚
  - `count`: æ•°å­—ï¼Œè¡¨ç¤ºåŒ¹é…çš„å­èŠ‚ç‚¹æˆ–åä»£èŠ‚ç‚¹æ•°é‡ã€‚
  - `labelClassName`: å­—ç¬¦ä¸²ï¼Œæ¨èç”¨äºå¤–å±‚æ ‡ç­¾çš„ CSS ç±»åã€‚
  - `countClassName`: å­—ç¬¦ä¸²ï¼Œæ¨èç”¨äºè®¡æ•°æ ‡ç­¾çš„ CSS ç±»åã€‚

- **`value-label` æ’æ§½ä¸Šä¸‹æ–‡**ï¼š
  - `node`: å½“å‰é€‰ä¸­èŠ‚ç‚¹çš„èŠ‚ç‚¹å¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰åŸå§‹æ•°æ®å’Œç»„ä»¶å†…éƒ¨æ·»åŠ çš„å±æ€§ï¼ˆå¦‚ `level`ã€`index`ã€`isDisabled` ç­‰ï¼‰ã€‚

- **`before-list` å’Œ `after-list` æ’æ§½ä¸Šä¸‹æ–‡**ï¼š
  - æ— å‚æ•°ï¼Œç›´æ¥è°ƒç”¨æ¸²æŸ“å‡½æ•°ã€‚

`level` å’Œ `index` æ˜¯ `treeselectMixin.js` åœ¨æ•°æ®è§„èŒƒåŒ–è¿‡ç¨‹ä¸­ä¸ºæ¯ä¸ªèŠ‚ç‚¹æ·»åŠ çš„é‡è¦å±æ€§ã€‚`level` è¡¨ç¤ºèŠ‚ç‚¹çš„æ·±åº¦ï¼ˆæ ¹èŠ‚ç‚¹ä¸º 0ï¼‰ï¼Œ`index` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„ç´¢å¼•ï¼ˆå¦‚ `[0, 1, 2]` è¡¨ç¤ºç¬¬ä¸€ä¸ªæ ¹èŠ‚ç‚¹çš„ç¬¬äºŒä¸ªå­èŠ‚ç‚¹çš„ç¬¬ä¸‰ä¸ªå­èŠ‚ç‚¹ï¼‰ã€‚è¿™äº›ä¿¡æ¯å¯¹äºå®ç°å¤æ‚çš„ UI é€»è¾‘ï¼ˆå¦‚è·¯å¾„æ˜¾ç¤ºã€æ·±åº¦ç›¸å…³çš„æ ·å¼ï¼‰è‡³å…³é‡è¦ã€‚

**Section sources**
- [Option.vue](file://src/components/Option.vue#L183-L189)
- [SingleValue.vue](file://src/components/SingleValue.vue#L13-L14)
- [treeselectMixin.js](file://src/mixins/treeselectMixin.js)

## å®ç°äº¤äº’å¼å†…å®¹

ä½œç”¨åŸŸæ’æ§½ä¸ä»…å¯ä»¥ç”¨äºé™æ€å†…å®¹çš„æ¸²æŸ“ï¼Œè¿˜å¯ä»¥ç”¨æ¥åˆ›å»ºäº¤äº’å¼å†…å®¹ã€‚ç”±äºæ’æ§½ä¸­çš„å†…å®¹æ˜¯åœ¨çˆ¶ç»„ä»¶çš„ä½œç”¨åŸŸå†…æ¸²æŸ“çš„ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ç»‘å®šäº‹ä»¶å¤„ç†å™¨ã€‚

ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨ `value-label` æ’æ§½ä¸­åˆ›å»ºä¸€ä¸ªå¯ç‚¹å‡»çš„æ ‡ç­¾ï¼Œç‚¹å‡»åæ˜¾ç¤ºä¸€ä¸ªåŠ¨æ€æç¤ºï¼š

```vue
<template slot="value-label" slot-scope="{ node }">
  <span @click="showTooltip(node)" @mouseenter="showTooltip(node)" @mouseleave="hideTooltip">
    {{ node.label }}
  </span>
</template>
```

åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰ `showTooltip` å’Œ `hideTooltip` æ–¹æ³•ï¼Œä»¥æ§åˆ¶æç¤ºæ¡†çš„æ˜¾ç¤ºå’Œéšè—ã€‚è¿™ä½¿å¾—é€‰ä¸­å€¼åŒºåŸŸå¯ä»¥åŒ…å«æŒ‰é’®ã€é“¾æ¥ã€ä¸‹æ‹‰èœå•ç­‰å¤æ‚çš„äº¤äº’å…ƒç´ ã€‚

**Section sources**
- [MultiValueItem.vue](file://src/components/MultiValueItem.vue#L17-L22)

## ç»“åˆ render å‡½æ•°ä¸å­ç»„ä»¶çš„æ’æ§½ä¼ é€’æœºåˆ¶

`vue-treeselect` çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨ Vue çš„ `render` å‡½æ•°æ¥æ„å»ºå…¶è™šæ‹Ÿ DOMã€‚åœ¨ `Treeselect.vue` çš„ `render` æ–¹æ³•ä¸­ï¼Œå®ƒé€šè¿‡ `h` å‡½æ•°åˆ›å»ºäº† `Control` å’Œ `Menu` ç»„ä»¶çš„ VNodeã€‚

æ’æ§½çš„ä¼ é€’æœºåˆ¶ä¾èµ–äº Vue çš„ `provide/inject` APIã€‚åœ¨ `treeselectMixin.js` ä¸­ï¼Œ`provide` é€‰é¡¹å°† `instance`ï¼ˆå³æ ¹ç»„ä»¶å®ä¾‹ï¼‰æš´éœ²ç»™æ•´ä¸ªç»„ä»¶æ ‘ï¼š

```javascript
provide() {
  return {
    instance: this,
  }
}
```

ç„¶åï¼Œåœ¨ `Option.vue`ã€`SingleValue.vue` ç­‰å­ç»„ä»¶ä¸­ï¼Œé€šè¿‡ `inject: ['instance']` æ¥æ³¨å…¥è¿™ä¸ªå®ä¾‹ã€‚è¿™æ ·ï¼Œå­ç»„ä»¶å°±å¯ä»¥é€šè¿‡ `this.instance.$scopedSlots` è®¿é—®åˆ°çˆ¶ç»„ä»¶ä¼ é€’è¿›æ¥çš„ä½œç”¨åŸŸæ’æ§½ã€‚

å½“å­ç»„ä»¶éœ€è¦æ¸²æŸ“æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥ `instance.$scopedSlots` ä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”çš„æ’æ§½åç§°ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™è°ƒç”¨è¯¥æ’æ§½å‡½æ•°å¹¶ä¼ å…¥ä¸Šä¸‹æ–‡æ•°æ®ã€‚è¿™ä¸ªè¿‡ç¨‹å°†çˆ¶ç»„ä»¶çš„æ¨¡æ¿é€»è¾‘ä¸å­ç»„ä»¶çš„æ¸²æŸ“é€»è¾‘æ— ç¼è¿æ¥èµ·æ¥ã€‚

**Section sources**
- [Treeselect.vue](file://src/components/Treeselect.vue#L31-L38)
- [treeselectMixin.js](file://src/mixins/treeselectMixin.js#L64-L71)
- [Option.vue](file://src/components/Option.vue#L11-L12)

## æœ€ä½³å®è·µä¸æ€§èƒ½å»ºè®®

- **é¿å…è¿‡åº¦å¤æ‚çš„æ’æ§½å†…å®¹**ï¼šè™½ç„¶ä½œç”¨åŸŸæ’æ§½åŠŸèƒ½å¼ºå¤§ï¼Œä½†è¿‡äºå¤æ‚çš„æ¨¡æ¿å¯èƒ½ä¼šå½±å“æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶ã€‚
- **åˆ©ç”¨è™šæ‹Ÿæ»šåŠ¨**ï¼šå¯¹äºåŒ…å«å¤§é‡é€‰é¡¹çš„æ ‘å½¢ç»“æ„ï¼Œåº”å¯ç”¨ `virtual-scroll` å±æ€§ï¼Œä»¥ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ã€‚
- **åˆç†ä½¿ç”¨ `flatten-search-results`**ï¼šåœ¨æœç´¢æ—¶ï¼Œæ­¤å±æ€§å¯ä»¥ç®€åŒ–ç»“æœï¼Œé¿å…æ˜¾ç¤ºè¿‡å¤šçš„ç¥–å…ˆèŠ‚ç‚¹ã€‚
- **ç¼“å­˜é€‰é¡¹**ï¼šå¯ç”¨ `cache-options` å¯ä»¥é¿å…é‡å¤çš„æœç´¢è¯·æ±‚ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚
- **é˜²æŠ–æœç´¢**ï¼šå¯¹äºå¼‚æ­¥æœç´¢ï¼Œåº”åœ¨ `loadOptions` å›è°ƒä¸­å®ç°é˜²æŠ–ï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„æœåŠ¡å™¨è¯·æ±‚ã€‚

é€šè¿‡éµå¾ªè¿™äº›æœ€ä½³å®è·µï¼Œå¯ä»¥ç¡®ä¿åœ¨å®ç°é«˜åº¦å®šåˆ¶åŒ– UI çš„åŒæ—¶ï¼Œä¿æŒåº”ç”¨çš„æµç•…å’Œå“åº”æ€§ã€‚

**Section sources**
- [LargeDataExample.vue](file://src/examples/LargeDataExample.vue)